import{r as O,b3 as Le,an as Be,al as Ae,ab as he,b4 as Me,b5 as Fe,b6 as We,g as le,b7 as ye,o as n,c as p,a as c,q as E,h as C,s as e,b8 as se,t as j,v as D,d as B,W as ze,Y,F as V,n as A,T as de,X as He,m as R,b as f,w as k,M as ge,k as _e,A as be,b9 as Je,ba as Ge,bb as Ke,a1 as Qe,aj as ie,Z as Xe,am as Ye,L as Z,aE as Ze,S as ke,i as xe,bc as et,bd as tt,a5 as ot,J as nt,be as st,ad as lt}from"./entry.6507cb32.js";import{_ as at}from"./Navbar.vue.1a2a587f.js";import{_ as Ce}from"./Badge.8d650e3b.js";import{_ as we}from"./NSelect.vue.9556d6e0.js";import{_ as rt}from"./NCheckbox.vue.63949e52.js";import{_ as ut}from"./CodeSnippets.vue.b4698473.js";import{_ as it}from"./NCodeBlock.vue.77e54b2e.js";import{C as me,S as $e}from"./constants.4e5eba24.js";import{U as dt}from"./json-editor-vue.bbdad521.js";import{_ as ct}from"./NSectionBlock.b074e0b8.js";import{_ as pt}from"./DrawerRight.vue.3ab85e5b.js";import"./client.ece13385.js";import"./NIconTitle.vue.0a904b99.js";const ne=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function ft(l,h){if(typeof l!="string")throw new TypeError("argument str must be a string");const m={},w=(h||{}).decode||ht;let _=0;for(;_<l.length;){const t=l.indexOf("=",_);if(t===-1)break;let y=l.indexOf(";",_);if(y===-1)y=l.length;else if(y<t){_=l.lastIndexOf(";",t-1)+1;continue}const r=l.slice(_,t).trim();if(m[r]===void 0){let a=l.slice(t+1,y).trim();a.codePointAt(0)===34&&(a=a.slice(1,-1)),m[r]=vt(a,w)}_=y+1}return m}function ve(l,h,m){const o=m||{},w=o.encode||yt;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!ne.test(l))throw new TypeError("argument name is invalid");const _=w(h);if(_&&!ne.test(_))throw new TypeError("argument val is invalid");let t=l+"="+_;if(o.maxAge!==void 0&&o.maxAge!==null){const y=o.maxAge-0;if(Number.isNaN(y)||!Number.isFinite(y))throw new TypeError("option maxAge is invalid");t+="; Max-Age="+Math.floor(y)}if(o.domain){if(!ne.test(o.domain))throw new TypeError("option domain is invalid");t+="; Domain="+o.domain}if(o.path){if(!ne.test(o.path))throw new TypeError("option path is invalid");t+="; Path="+o.path}if(o.expires){if(!mt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");t+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(t+="; HttpOnly"),o.secure&&(t+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":t+="; Priority=Low";break;case"medium":t+="; Priority=Medium";break;case"high":t+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:t+="; SameSite=Strict";break;case"lax":t+="; SameSite=Lax";break;case"strict":t+="; SameSite=Strict";break;case"none":t+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return t}function mt(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}function vt(l,h){try{return h(l)}catch{return l}}function ht(l){return l.includes("%")?decodeURIComponent(l):l}function yt(l){return encodeURIComponent(l)}const gt={path:"/",watch:!0,decode:l=>Fe(decodeURIComponent(l)),encode:l=>encodeURIComponent(typeof l=="string"?l:JSON.stringify(l))};function _t(l,h){const m={...gt,...h},o=bt(m)||{},w=O(o[l]??m.default?.());{const _=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${l}`);Le()&&Be(()=>{_?.close()});const t=()=>{xt(l,w.value,m),_?.postMessage(We(w.value))};let y=!1;_&&(_.onmessage=r=>{y=!0,w.value=r.data,Ae(()=>{y=!1})}),m.watch?he(w,(r,a)=>{y||Me(r,a)||t()},{deep:m.watch!=="shallow"}):t()}return w}function bt(l={}){return ft(document.cookie,l)}function kt(l,h,m={}){return h==null?ve(l,h,{...m,maxAge:-1}):ve(l,h,m)}function xt(l,h,m={}){document.cookie=kt(l,h,m)}const Ct=c("div",{"x-divider":""},null,-1),Se=le({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(l){const h=O(!0),m=ye();return(o,w)=>{const _=de,t=Ce,y=Se;return n(),p("div",null,[c("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:E([{"bg-active":e(m)===o.item.filepath}]),style:ze({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:w[0]||(w[0]=r=>{h.value=!e(h),m.value=o.item.filepath})},[c("div",{class:E({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(n(),C(_,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(h)?90:0,transition:""},null,8,["transform-rotate"])):(n(),C(t,{key:1,class:E(("getRequestMethodClass"in o?o.getRequestMethodClass:e(se))(o.item.method||"*")),textContent:j((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),c("span",{class:E({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(n(),C(_,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):D("",!0),B(" "+j(o.item.route),1)],2)],6),Ct,e(h)?Y(o.$slots,"default",{key:0},()=>[(n(!0),p(V,null,A(o.item.routes,r=>(n(),C(y,{key:r.filepath,item:r,index:o.index+1},null,8,["item","index"]))),128))]):D("",!0)])}}}),wt={p4:"",flex:"~ col gap-4"},$t={key:1,ml2:"",flex:""},St=["value"],Tt={key:0,flex:"","gap-4":""},Rt=c("div",{"flex-auto":""},null,-1),Te=le({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(l,{emit:h}){const m=l,o=He(m,"modelValue",h,{passive:!0}),w=R(()=>[...m.keys,"key","value","type"]),_=R(()=>{const r={};for(const a of w.value)r[a]=m.default[a]||"";return r}),t=["string","number","boolean","file","date","time","datetime-local"];function y(r,a){const U=a.target;if(U.files&&U.files[0]){const J=U.files[0],M=new FileReader;M.readAsDataURL(J),M.onload=()=>{o.value[r].value=M.result}}}return he(()=>o,r=>{r.value.forEach(a=>{if(a.type==="number"&&typeof a.value!="number"){const U=Number.parseFloat(a.value);a.value=Number.isNaN(U)?0:U}else a.type==="boolean"&&typeof a.value!="boolean"?a.value=!0:a.type==="file"&&typeof a.value!="object"?a.value="":a.type==="date"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}$/)?a.value=new Date().toISOString().slice(0,10):a.type==="time"&&typeof a.value=="string"&&!a.value.match(/^\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(11,16):a.type==="datetime-local"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(0,16):a.type==="string"&&(a.value=a.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(r,a)=>{const U=ge,J=rt,M=we,z=de,v=_e;return n(),p("div",wt,[(n(!0),p(V,null,A(e(o),(d,x)=>(n(),p("div",{key:x,flex:"~ gap-2","justify-around":""},[Y(r.$slots,"input",{item:d}),(n(!0),p(V,null,A(e(w),$=>(n(),p(V,{key:$},[d.type!==null&&$==="key"?(n(),C(U,{key:0,modelValue:d[$],"onUpdate:modelValue":g=>d[$]=g,placeholder:$,"flex-1":"","font-mono":"",n:"sm primary",disabled:r.disabled,class:E(r.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):$==="value"?(n(),p(V,{key:1},[d.type==="file"?(n(),C(U,{key:0,type:"file",disabled:r.disabled,class:E(r.disabled?"op75":""),onChange:g=>y(x,g)},null,8,["disabled","class","onChange"])):d.type==="boolean"?(n(),p("div",$t,[f(J,{modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,placeholder:"Value",n:"green lg",disabled:r.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(n(),C(U,{key:2,modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,type:d.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:r.disabled,class:E(r.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):$==="type"?(n(),C(M,{key:2,modelValue:d.type,"onUpdate:modelValue":g=>d.type=g,n:"sm green",class:E(r.disabled?"op75":""),disabled:r.disabled},{default:k(()=>[(n(),p(V,null,A(t,g=>c("option",{key:g,value:g},j(g),9,St)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):D("",!0)],64))),128)),Y(r.$slots,"input-actions",{},()=>[f(v,{n:"red",disabled:r.disabled,class:E(r.disabled?"op0!":""),onClick:$=>e(o).splice(x,1)},{default:k(()=>[f(z,{icon:"carbon:delete"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),r.disabled?D("",!0):(n(),p("div",Tt,[Y(r.$slots,"actions",{params:e(o)},()=>[f(v,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:a[0]||(a[0]=d=>e(o).push({...e(_)}))},{default:k(()=>[B(" Add ")]),_:1}),Rt,e(o).length?(n(),C(v,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:a[1]||(a[1]=d=>o.value=[])},{default:k(()=>[B(" Remove All ")]),_:1})):D("",!0)])])),Y(r.$slots,"default")])}}}),Re=O(await be.getOptions("serverRoutes")),Vt=Je(Re),Ut={serverRoutes:Vt};function Ve(l){return Ut[l]}Ge(Re,async l=>{be.updateOptions("serverRoutes",l)},{deep:!0,flush:"post",debounce:500,maxWait:1e3});const It={"h-full":"","w-full":"",flex:"~ col"},Nt={flex:"~ col gap-2","flex-none":"",p4:"","navbar-glass":""},Dt={flex:"~ gap2"},Et={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},jt=c("div",{"flex-auto":""},null,-1),Ot={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Pt={"text-right":"","font-mono":""},qt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Lt={flex:"~ gap-4"},Bt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},At=c("div",{"w-5":"","x-divider":""},null,-1),Mt=c("div",{"flex-none":""}," Default Inputs ",-1),Ft=c("div",{"x-divider":""},null,-1),Wt={key:2},zt={key:3,border:"b base",relative:"","n-code-block":""},Ht={flex:"~ wrap","w-full":""},Jt=["onClick"],Gt=c("div",{border:"b base","flex-auto":""},null,-1),Kt={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},Qt=c("div",null,"Response",-1),Xt={key:1,"text-xs":"",op50:""},Yt=c("div",{"flex-auto":""},null,-1),Zt=c("div",{op50:""}," Request finished in ",-1),eo={key:0,"flex-auto":"","overflow-auto":""},to={border:"~ base","h-full":"","w-full":"",rounded:""},oo=["data"],no={key:2,"flex-auto":"","overflow-auto":"",p4:""},so={border:"~ base",rounded:""},lo=["src"],ao={key:1,controls:"",rounded:""},ro=["src"],uo=le({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(l,{emit:h}){const m=l,[o,w]=Ke(),_=Qe(),t=ie({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),y=R(()=>t.contentType.includes("application/json")?"json":t.contentType.includes("text/html")?"html":t.contentType.includes("text/css")?"css":t.contentType.includes("text/javascript")?"javascript":t.contentType.includes("image")||t.contentType.includes("video")?"media":t.contentType.includes("text/xml")||t.contentType.includes("application/xml")?"xml":t.contentType.includes("application/pdf")?"pdf":"text"),r=R(()=>{if(y.value==="json")return JSON.stringify(t.data,null,2);if(y.value==="media"||y.value==="pdf"){const s=new Blob([t.data],{type:t.contentType});return URL.createObjectURL(s)}return t.data}),a=O(!1),U=O(!1),J=Xe(),M=R(()=>m.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),z=R(()=>M.value?.filter(s=>s.startsWith(":")||s.startsWith("**:"))||[]),v=O(m.route.method||"GET"),d=O({}),x=ie({query:[{key:"",value:"",type:"string"}],body:[{key:"",value:"",type:"string"}],headers:[{key:"Content-Type",value:"application/json",type:"string"}]}),$=O({}),{inputDefaults:g}=Ve("serverRoutes"),P=["GET","POST","PUT","PATCH","DELETE","HEAD"],q=["PATCH","POST","PUT","DELETE"],L=R(()=>q.includes(v.value.toUpperCase())),S=O(z.value.length?"params":"query"),ee=["input","json"],W=O(ee[0]),K=R({get:()=>x[S.value],set:s=>{x[S.value]=s}}),T=R(()=>({...G(g.value.query),...G(x.query)})),te=R(()=>({...G(g.value.headers),...G(x.headers)})),ae=R(()=>L.value?W.value==="json"?{...G(g.value.body),...$.value}:{...G(g.value.body),...G(x.body)}:void 0),Ue=R(()=>{let s=_.value?.devServer.url||"http://localhost";s.charAt(s.length-1)==="/"&&(s=s.slice(0,-1));const i=_.value?.devServer.port||3e3;return s.includes(`:${i}`)?s:`${s}:${i}`}),oe=R(()=>{let s=new URLSearchParams(T.value).toString();s&&(s=`?${s}`);const i=(M.value?.map(N=>(N.startsWith(":")||N.startsWith("**:"))&&d.value[N]||N).join("")||"")+s;let b=_.value?.app.baseURL||"";return(b==="./"||b===".")&&(b=""),b.endsWith("/")&&(b=b.slice(0,-1)),b+i}),Ie=R(()=>Ue.value+oe.value);function G(s){const i=Object.fromEntries(s.filter(({key:b,value:N})=>b&&N!==void 0).map(({key:b,value:N})=>[b,N]));return Object.entries(i).length?i:void 0}async function ce(){U.value=!0,a.value=!0;const s=Date.now();try{t.data=await $fetch(Ie.value,{method:v.value.toUpperCase(),headers:te.value,query:T.value,body:ae.value,onResponse({response:i}){t.contentType=(i.headers.get("content-type")||"").toString().toLowerCase().trim(),t.statusCode=i.status},onResponseError(i){t.error=i.response._data,t.data=i.response._data}})}catch{}a.value=!1,t.fetchTime=Date.now()-s}const pe=R(()=>{const s=[],i=[],b=Object.entries(te.value).filter(([I,F])=>I&&F&&!(I==="Content-Type"&&F==="application/json")).map(([I,F])=>`  '${I}': '${F}'`).join(`,
`);v.value.toUpperCase()!=="GET"&&i.push(`method: '${v.value.toUpperCase()}'`),b&&i.push(`headers: {
${b}
}`),ae.value&&i.push(`body: ${JSON.stringify(ae.value,null,2)}`);const N=i.length?`, {
${i.join(`,
`).split(`
`).map(I=>`  ${I}`).join(`
`)}
}`:"";return s.push({name:"useFetch",lang:"javascript",docs:me.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${oe.value}'${N})`}),s.push({name:"$fetch",lang:"javascript",docs:me.nuxt.$fetch,code:`await $fetch('${oe.value}'${N})`}),s}),Ne=R(()=>{const s=[];return z.value.length&&s.push({name:"Params",slug:"params",length:z.value.length}),s.push({name:"Query",slug:"query",length:x.query.length}),L.value&&s.push({name:"Body",slug:"body",length:x.body.length}),s.push({name:"Headers",slug:"headers",length:x.headers.length}),s.push({name:"Cookies",slug:"cookies"}),s.push({name:"Snippets",slug:"snippet"}),s}),X=O(De());function De(){return document.cookie.split("; ").map(s=>{const[i,b]=s.split("=");return{key:i,value:b}})}const H=ie({key:"",value:""});function re(s,i){if(!s)return;const b=X.value.find(I=>I.key===s),N=_t(s);b!==void 0?i===void 0&&(X.value=X.value.filter(I=>I.key!==s)):(X.value.push({key:s,value:i}),H.key="",H.value=""),N.value=i}return Ye(()=>{W.value==="json"&&typeof $.value=="string"&&($.value=JSON.parse($.value))}),(s,i)=>{const b=_e,N=we,I=ge,F=de,Ee=ke,fe=Te,je=ut,Oe=xe,Pe=et,ue=Ce,qe=it;return n(),p("div",It,[c("div",Nt,[c("div",Dt,[s.route.method?(n(),C(b,{key:0,class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(se))(e(v))),"pointer-events-none":"",tabindex:"-1"},{default:k(()=>[B(j(e(v).toUpperCase()),1)]),_:1},8,["class"])):(n(),C(N,{key:1,modelValue:e(v),"onUpdate:modelValue":i[0]||(i[0]=u=>Z(v)?v.value=u:null),class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(se))(e(v)))},{default:k(()=>[(n(),p(V,null,A(P,u=>c("option",{key:u,class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(se))(u))},j(u.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),f(I,{"model-value":e(oe),disabled:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"primary xs"},null,8,["model-value"]),f(b,{n:"primary solid",onClick:ce},{default:k(()=>[f(F,{icon:"carbon:send"})]),_:1})])]),c("div",Et,[(n(!0),p(V,null,A(e(Ne),u=>(n(),C(b,{key:u.slug,class:E(e(S)===u.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Q=>S.value=u.slug},{default:k(()=>[f(F,{icon:("ServerRouteTabIcons"in s?s.ServerRouteTabIcons:e($e))[u.slug]},null,8,["icon"]),B(" "+j(u.name)+" "+j(u?.length?`(${u.length})`:"")+" ",1),c("span",null,j(e(g)[u.slug]?.length?`(${e(g)[u.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),jt,f(b,{icon:"carbon-launch",onClick:i[1]||(i[1]=u=>e(J)(s.route.filepath))},{default:k(()=>[B(" Open in Editor ")]),_:1})]),e(S)==="params"?(n(),p("div",Ot,[(n(!0),p(V,null,A(e(z),u=>(n(),p(V,{key:u},[c("div",Pt,j(u),1),f(I,{modelValue:e(d)[u],"onUpdate:modelValue":Q=>e(d)[u]=Q,placeholder:u,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):D("",!0),e(S)==="cookies"?(n(),p("div",qt,[(n(!0),p(V,null,A(e(X),u=>(n(),p("div",{key:u.key,flex:"~ gap-4 items-center"},[f(I,{placeholder:"Key...","model-value":u.key,disabled:"","op-70":""},null,8,["model-value"]),f(I,{placeholder:"Value...","model-value":u.value,"flex-1":"",n:"primary",onInput:Q=>re(u.key,Q.target?.value)},null,8,["model-value","onInput"]),f(b,{title:"Delete",n:"red",onClick:Q=>re(u.key,void 0)},{default:k(()=>[f(F,{icon:"i-carbon-delete"})]),_:2},1032,["onClick"])]))),128)),c("div",Lt,[f(I,{modelValue:e(H).key,"onUpdate:modelValue":i[2]||(i[2]=u=>e(H).key=u),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),f(I,{modelValue:e(H).value,"onUpdate:modelValue":i[3]||(i[3]=u=>e(H).value=u),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),f(b,{title:"Add",n:"primary",onClick:i[4]||(i[4]=u=>re(e(H).key,e(H).value))},{default:k(()=>[f(F,{icon:"i-carbon-save"})]),_:1})])])):D("",!0),f(e(o),null,{default:k(()=>[f(fe,{modelValue:e(K),"onUpdate:modelValue":i[7]||(i[7]=u=>Z(K)?K.value=u:null),default:{type:"string"},"max-h-xs":"","of-auto":""},{default:k(()=>[e(g)[e(S)]?.length?(n(),p(V,{key:0},[c("div",Bt,[At,Mt,f(Ee,{icon:"i-carbon-edit",onClick:i[5]||(i[5]=u=>h("open-default-input"))}),Ft]),f(fe,{modelValue:e(g)[e(S)],"onUpdate:modelValue":i[6]||(i[6]=u=>e(g)[e(S)]=u),disabled:"",p0:""},null,8,["modelValue"])],64)):D("",!0)]),_:1},8,["modelValue"])]),_:1}),e(S)==="snippet"?(n(),p("div",Wt,[e(pe).length?(n(),C(je,{key:0,"code-snippets":e(pe)},null,8,["code-snippets"])):D("",!0)])):e(K)?(n(),p("div",zt,[e(S)==="body"?(n(),p(V,{key:0},[c("div",Ht,[(n(),p(V,null,A(ee,u=>c("button",{key:u,px4:"",py2:"",border:"r base",hover:"bg-active",class:E({"border-b":u!==e(W)}),onClick:Q=>W.value=u},[c("div",{class:E({op30:u!==e(W)}),"font-mono":""},j(u),3)],10,Jt)),64)),Gt]),e(W)==="input"?(n(),C(e(w),{key:0})):e(W)==="json"?(n(),C(e(dt),Ze({key:1,modelValue:e($),"onUpdate:modelValue":i[8]||(i[8]=u=>Z($)?$.value=u:null),class:[[s.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},s.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):D("",!0)],64)):(n(),C(e(w),{key:1}))])):D("",!0),e(U)?e(a)?(n(),C(Pe,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:k(()=>[B(" Fetching... ")]),_:1})):(n(),p(V,{key:6},[c("div",Kt,[Qt,e(t).error?(n(),C(ue,{key:0,"bg-red-400:10":"","text-red-400":""},{default:k(()=>[B(" Error ")]),_:1})):D("",!0),f(ue,{class:E({"bg-orange-400:10 text-orange-400":e(t).error,"bg-green-400:10 text-green-400":!e(t).error})},{default:k(()=>[B(j(e(t).statusCode),1)]),_:1},8,["class"]),e(t).contentType?(n(),p("code",Xt,j(e(t).contentType),1)):D("",!0),Yt,Zt,f(ue,{"bg-green-400:10":"","text-green-400":""},{default:k(()=>[B(j(e(t).fetchTime)+" ms ",1)]),_:1})]),e(y)==="pdf"?(n(),p("div",eo,[c("div",to,[c("object",{data:e(r),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,oo)])])):e(y)!=="media"?(n(),C(qe,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(r),lang:e(y)},null,8,["code","lang"])):(n(),p("div",no,[c("div",so,[e(t).contentType.includes("image")?(n(),p("img",{key:0,rounded:"",src:e(r)},null,8,lo)):(n(),p("video",ao,[c("source",{src:e(r),type:"video/mp4"},null,8,ro)]))])]))],64)):(n(),C(Oe,{key:4},{default:k(()=>[f(b,{n:"primary",onClick:ce},{default:k(()=>[f(F,{icon:"carbon:send"}),B(" Send request ")]),_:1})]),_:1}))])}}}),io={flex:"~ gap1","text-sm":""},co={key:0,op50:""},po={op50:""},fo=c("span",{op75:""},"Select a route to start",-1),mo=c("div",{p4:"",border:"b base"},[c("span",{"text-lg":""},"Default Inputs"),c("br"),c("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Ro=le({__name:"server-routes",setup(l){const h=O(!1),m=tt(),o=ye(),{selectedRoute:w,view:_,inputDefaults:t}=Ve("serverRoutes"),y=R(()=>{!o.value&&w.value&&(o.value=w.value.filepath);const v=m.value?.find(d=>d.filepath===o.value);return o.value!==w.value?.filepath&&v&&(w.value=v),v}),r=O(""),a=R(()=>new ot(m.value||[],{keys:["method","route"],shouldSort:!0})),U=R(()=>m.value?r.value?a.value.search(r.value).map(d=>d.item):m.value:[]),J=R(()=>{const v=[],d=(x,$)=>{x.routes=x.routes||[],x.routes.push($)};return U.value.forEach(x=>{const $=x.filepath.split("/"),g=$.slice($.indexOf("server")+1);g.length>0&&g[g.length-1].includes(".")&&g.pop();let P=null;if(g.forEach(q=>{const L=P?P.routes?.find(S=>S.route===q):v.find(S=>S.route===q);if(L)P=L;else{const S={route:q,filepath:q.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};P?d(P,S):v.push(S),P=S}}),x.type==="runtime"){const q=v.find(L=>L.route==="runtime");if(q)d(q,x);else{const L={route:"runtime",filepath:"runtime",type:"collection",routes:[x]};v.push(L)}}else P?d(P,x):v.push(x)}),v});function M(){_.value=_.value==="tree"?"list":"tree"}function z(v){return v.charAt(0).toUpperCase()+v.slice(1)}return(v,d)=>{const x=ke,$=at,g=Se,P=uo,q=lt,L=xe,S=nt,ee=Te,W=ct,K=pt;return n(),p(V,null,[f(S,{"storage-key":"tab-server-routes"},{left:k(()=>[f($,{search:e(r),"onUpdate:search":d[1]||(d[1]=T=>Z(r)?r.value=T:null),pb2:""},{actions:k(()=>[f(x,{"text-lg":"",icon:e(_)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",onClick:M},null,8,["icon"]),f(x,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",onClick:d[0]||(d[0]=T=>h.value=!e(h))})]),default:k(()=>[c("div",io,[e(r)?(n(),p("span",co,j(e(U).length)+" matched Â· ",1)):D("",!0),c("span",po,j(e(m)?.length)+" routes in total",1)])]),_:1},8,["search"]),(n(!0),p(V,null,A(e(_)==="tree"?e(J):e(U),T=>(n(),C(g,{key:T.filepath,item:T},null,8,["item"]))),128))]),right:k(()=>[(n(),C(st,{max:10},[e(y)?(n(),C(P,{key:e(y).filepath,route:e(y),onOpenDefaultInput:d[2]||(d[2]=T=>h.value=!0)},null,8,["route"])):D("",!0)],1024)),e(y)?D("",!0):(n(),C(L,{key:0},{default:k(()=>[f(q,{px6:"",py2:""},{default:k(()=>[fo]),_:1})]),_:1}))]),_:1}),f(K,{modelValue:e(h),"onUpdate:modelValue":d[3]||(d[3]=T=>Z(h)?h.value=T:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:d[4]||(d[4]=T=>h.value=!1)},{default:k(()=>[c("div",null,[mo,(n(!0),p(V,null,A(Object.keys(e(t)),T=>(n(),C(W,{key:T,text:`${z(T)} ${e(t)[T].length?`(${e(t)[T].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in v?v.ServerRouteTabIcons:e($e))[T]},{default:k(()=>[f(ee,{modelValue:e(t)[T],"onUpdate:modelValue":te=>e(t)[T]=te,py0:"",default:{type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Ro as default};
