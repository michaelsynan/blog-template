import{g as E,r as S,O as U,o,c as u,b as g,s as t,a as e,d as B,F as N,n as L,h as F,w as T,v as D,q as R,P as O,Q as te,R as ne,A as X,B as se,S as q,T as K,M as oe,k as W,m as $,U as ae,V as ie,W as Q,t as P,X as le,Y as re,L as Z,Z as ce,a0 as G,a1 as ue,a2 as de,a3 as pe,a4 as me,a5 as fe,a6 as he}from"./entry.6507cb32.js";import{_ as _e}from"./Navbar.vue.1a2a587f.js";import{_ as ve}from"./NSectionBlock.b074e0b8.js";import{_ as ge}from"./FilepathItem.vue.84aa0a31.js";import{_ as xe}from"./CodeSnippets.vue.b4698473.js";import{_ as be}from"./DrawerRight.vue.3ab85e5b.js";import{D as we}from"./constants.4e5eba24.js";import"./NIconTitle.vue.0a904b99.js";import"./NCodeBlock.vue.77e54b2e.js";import"./client.ece13385.js";const ye={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},$e={for:"drop-zone-input","text-3xl":""},ke={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},Ce=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),Pe={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Ae={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Fe=["src"],De={flex:"~ gap1","items-center":""},Ie={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Ne=E({__name:"DropZone",props:{folder:{type:String,required:!0}},setup(A){const n=A,l=S(!1),r=S(),c=S([]),k=["image","video"];function V(a){r.value=a.target,l.value=!0}function p(a){a.target===r.value&&(l.value=!1)}function C(a){a.preventDefault()}function j(a){a.preventDefault(),I(a.dataTransfer.files)}function I(a){const d=Array.from(a||[]);if(d.length){const v=[],y=c.value.map(i=>i.name);for(const i of d)if(y.includes(i.name)){let _=1;const[w,z]=i.name.split(".");for(;y.includes(`${w} (${_}).${z}`);)_++;const M=`${w}-${_}.${z}`,J=new Blob([i],{type:i.type}),ee=new File([J],M,{lastModified:Date.now()});v.push(ee),y.push(M)}else i.type===""?O({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}):k.some(_=>i.type.includes(_))?v.push(i):O({message:`"${i.type}" file type is not allowed`,icon:"carbon:face-dissatisfied",classes:"text-orange"});c.value=[...c.value,...v]}}async function h(){if(te.value||ne.value)return;const a=[];for(const d of c.value){const v=new FileReader;v.readAsDataURL(d);const i=(await new Promise(_=>{v.onload=()=>_(v.result)})).split(";base64,").pop();a.push({name:d.name,data:i})}await X.writeStaticAssets(await se(),[...a],n.folder).then(()=>{b(),O({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(d=>{console.error(d),b(),O({message:`Error uploading files: ${d}`,icon:"i-carbon-warning",classes:"text-red"})}),l.value=!1}function f(a){c.value?.splice(a,1)}function s(a){return URL.createObjectURL(a)}function m(a,d){const[v,y]=a.name.split("."),i=d.replace(/\.\w+$/,""),_=`${i}.${y}`;return i.length===0?(alert("File name must be at least 1 characters long"),v):(Object.defineProperty(a,"name",{value:_,writable:!1}),c.value.splice(c.value.indexOf(a),1,a),a)}function x(){c.value=[]}function b(){l.value=!1,x()}return U("dragenter",V),U("dragleave",p),U("dragover",C),U("drop",j),(a,d)=>{const v=q,y=K,i=oe,_=W;return o(),u("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:R(t(l)?"opacity-100 visible":"opacity-0 invisible")},[g(v,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:b}),t(c)?.length?(o(),u("div",ke,[Ce,e("div",Pe,[(o(!0),u(N,null,L(t(c),(w,z)=>(o(),u("div",{key:w.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Ae,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:s(w)},null,8,Fe)]),e("div",De,[g(i,{n:"xs","flex-auto":"","model-value":w.name,"onUpdate:modelValue":M=>m(w,M.target.value)},null,8,["model-value","onUpdate:modelValue"]),g(v,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:M=>f(z)},null,8,["onClick"])])]))),128))]),e("div",Ie,[t(c).length?(o(),F(_,{key:0,n:"red",onClick:x},{default:T(()=>[g(y,{icon:"carbon-clean"}),B(" Clear ")]),_:1})):D("",!0),g(_,{disabled:!t(c).length,n:"primary solid",onClick:h},{default:T(()=>[g(y,{icon:"carbon-cloud-upload"}),B(" Upload ")]),_:1},8,["disabled"])])])):(o(),u("div",ye,[e("label",$e,[g(y,{icon:"carbon-cloud-upload","mr-2":""}),B(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:d[0]||(d[0]=w=>I(w.target.files))},null,32)]))],2)}}}),Se=E({__name:"AssetFontPreview",props:{asset:{}},setup(A){const n=A,l=$(()=>`devtools-assets-${ae(n.asset)}`);return ie($(()=>`
  @font-face {
    font-family: '${l.value}';
    src: url('${n.asset.publicPath}');
  }
`)),(r,c)=>(o(),u("div",{"of-hidden":"",style:Q({fontFamily:`'${t(l)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Te={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Ve=["src"],je={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Ee={key:3,"w-full":"","self-start":"",p4:""},Le=["textContent"],Be={key:4,"i-carbon-help":"","text-3xl":"",op20:""},Y=E({__name:"AssetPreview",props:{asset:{},textContent:{}},setup(A){return(n,l)=>{const r=Se;return o(),u("div",Te,[n.asset.type==="image"?(o(),u("img",{key:0,src:n.asset.publicPath},null,8,Ve)):n.asset.type==="font"?(o(),F(r,{key:n.asset.publicPath,asset:n.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):n.asset.type==="text"&&!n.textContent?(o(),u("div",je)):n.asset.type==="text"&&n.textContent?(o(),u("div",Ee,[e("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:P(n.textContent)},null,8,Le)])):(o(),u("div",Be))])}}}),ze={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},Me={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},Ue=E({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(A){const n=A,l=$(()=>n.folder&&n.asset.path.startsWith(n.folder)?n.asset.path.slice(n.folder.length):n.asset.path);return(r,c)=>{const k=Y;return o(),u("button",ze,[g(k,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:r.asset},null,8,["asset"]),e("div",Me,P(t(l)),1)])}}}),Oe=e("div",{"x-divider":""},null,-1),H=E({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(A,{emit:n}){const l=A,r=le(l,"modelValue",n,{passive:!0}),c=$(()=>l.item?.children?.length),k=S(!0),V=$(()=>c.value?"i-carbon-folder":l.item.type==="image"?"i-carbon-image":l.item.type==="video"?"i-carbon-video":l.item.type==="audio"?"i-carbon-volume-up":l.item.type==="font"?"i-carbon-text-small-caps":l.item.type==="text"?"i-carbon-document":l.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(p,C)=>{const j=K,I=H;return o(),u("div",null,[e("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:Q({paddingLeft:`calc(1rem + ${p.index*1.5}em)`}),class:R({"bg-active":!t(c)&&t(r)?.filePath===p.item?.filePath}),onClick:C[0]||(C[0]=h=>t(c)?k.value=!t(k):r.value=p.item)},[e("div",{class:R(t(V))},null,2),e("span",{class:R({"flex items-center":t(c)}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},P(p.item.path),3),t(c)?(o(),F(j,{key:0,icon:"carbon:chevron-right","transform-rotate":t(k)?90:0,transition:""},null,8,["transform-rotate"])):D("",!0)],6),Oe,t(k)?re(p.$slots,"default",{key:0},()=>[(o(!0),u(N,null,L(p.item?.children,h=>(o(),F(I,{key:h.filepath,modelValue:t(r),"onUpdate:modelValue":C[1]||(C[1]=f=>Z(r)?r.value=f:null),item:h,index:p.index+1},null,8,["modelValue","item","index"]))),128))]):D("",!0)])}}}),Re={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},Xe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Ze={flex:"~","items-center":"","justify-center":""},qe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),Ge={"max-w-full":"","w-full":"","table-fixed":""},Ke=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),We={flex:"~ gap-1","w-full":"","items-center":""},Qe=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),Ye={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},He={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},Je=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),et={capitalize:""},tt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),nt={key:0},st=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),ot=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),at=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),it={op70:""},lt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),rt={flex:"~ gap2 wrap"},ct=e("div",{"flex-auto":""},null,-1),ut=E({__name:"AssetDetails",props:{asset:{}},setup(A){const n=A,l=ce(),r=G(()=>{if(n.asset.type==="image")return X.getImageMeta(n.asset.filePath)}),c=G(()=>{if(n.asset.type==="text")return X.getTextAssetContent(n.asset.filePath)}),k=ue(),V=$(()=>(k.value?._installedModules||[]).some(m=>m.meta?.name==="@nuxt/image"||m.meta?.name==="@nuxt/image-edge")),p=$(()=>{const s=[];if(n.asset.type==="image"){const m=r.value?.width?`
  width="${r.value.width}"
  height="${r.value.height}" `:" ";return s.push({lang:"vue-html",code:`<img${m}
  src="${n.asset.publicPath}"
/>`,name:"Plain Image"}),V.value&&s.push({lang:"vue-html",code:`<NuxtImage${m}
  src="${n.asset.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${m}
  src="${n.asset.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),s}return s.push({lang:"html",code:`<a download href="${n.asset.publicPath}">
  Download ${n.asset.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),s}),C=de(),j=pe(()=>n.asset.mtime),I=$(()=>{const s=n.asset.size;return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/1024/1024).toFixed(2)} MB`}),h=$(()=>{if(!r.value?.width||!r.value?.height)return"";const s=(x,b)=>b?s(b,x%b):x,m=s(r.value.width,r.value.height);return m>3?`${r.value.width/m}:${r.value.height/m}`:""}),f=$(()=>["image","text","video","font"].includes(n.asset.type));return(s,m)=>{const x=Y,b=ge,a=q,d=W,v=xe;return o(),u("div",Re,[t(f)?(o(),u(N,{key:0},[Xe,e("div",Ze,[g(x,{"max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:s.asset,"text-content":t(c)},null,8,["asset","text-content"])])],64)):D("",!0),qe,e("table",Ge,[e("tbody",null,[e("tr",null,[Ke,e("td",null,[e("div",We,[g(b,{filepath:s.asset.filePath,"text-left":""},null,8,["filepath"]),g(a,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:m[0]||(m[0]=y=>t(l)(s.asset.filePath))})])])]),e("tr",null,[Qe,e("td",null,[e("div",Ye,[e("div",He,P(s.asset.publicPath),1),g(a,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:m[1]||(m[1]=y=>t(C)(s.asset.publicPath))}),g(a,{"flex-none":"",to:s.asset.publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[Je,e("td",et,P(s.asset.type),1)]),t(r)?.width?(o(),u(N,{key:0},[e("tr",null,[tt,e("td",null,P(t(r).width)+" x "+P(t(r).height),1)]),t(h)?(o(),u("tr",nt,[st,e("td",null,P(t(h)),1)])):D("",!0)],64)):D("",!0),e("tr",null,[ot,e("td",null,P(t(I)),1)]),e("tr",null,[at,e("td",null,[B(P(new Date(s.asset.mtime).toLocaleString())+" ",1),e("span",it,"("+P(t(j))+")",1)])])])]),lt,e("div",rt,[g(d,{to:s.asset.publicPath,download:"",target:"_blank",icon:"carbon-download"},{default:T(()=>[B(" Download ")]),_:1},8,["to"]),s.asset.type==="image"?(o(),F(d,{key:0,disabled:"",icon:"carbon-image-service"},{default:T(()=>[B(" Optimize image (Coming soon) ")]),_:1})):D("",!0)]),ct,t(p).length?(o(),F(v,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":t(p)},null,8,["code-snippets"])):D("",!0)])}}}),dt={"h-full":"","of-auto":""},pt={"flex-none":"",flex:"~ gap2 items-center"},mt={op50:""},ft={key:0},ht={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},_t={key:1,p2:"",grid:"~ cols-minmax-8rem"},vt={key:1},Ft=E({__name:"assets",setup(A){const n=me(),l=S(""),r=$(()=>new fe(n.value||[],{keys:["path"]})),c=$(()=>l.value?r.value.search(l.value).map(f=>f.item):n.value||[]),k=$(()=>{const h={};for(const f of c.value){const s=`${f.path.split("/").slice(0,-1).join("/")}/`;h[s]||(h[s]=[]),h[s].push(f)}return Object.entries(h).sort(([f],[s])=>f.localeCompare(s))}),V=$(()=>{const h={path:"public",children:[]},f=(s,m,x)=>{const[b,...a]=m;let d=s.children.find(v=>v.path===b);d||(d={...x,path:b,children:[]},s.children.push(d)),a.length>1?f(d,a,x):a.length===1&&d.children.push({...x,path:a[0]})};return c.value.forEach(s=>{const m=s.path.split("/").filter(x=>x!=="");f(h,m,s)}),h.children}),p=S(),C=S("grid");function j(){C.value=C.value==="list"?"grid":"list"}he("Escape",()=>{p.value=void 0});const I=S();return(h,f)=>{const s=q,m=_e,x=Ne,b=Ue,a=ve,d=H,v=ut,y=be;return o(),u("div",dt,[g(m,{ref_key:"navbar",ref:I,search:t(l),"onUpdate:search":f[0]||(f[0]=i=>Z(l)?l.value=i:null),pb2:""},{actions:T(()=>[e("div",pt,[g(s,{"text-lg":"",icon:t(C)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:j},null,8,["icon"])])]),default:T(()=>[e("div",mt,[t(l)?(o(),u("span",ft,P(t(c).length)+" matched · ",1)):D("",!0),e("span",null,P(t(n)?.length)+" assets in total",1)])]),_:1},8,["search"]),g(x,{folder:"/"}),t(C)==="grid"?(o(),u(N,{key:0},[t(k).length>1?(o(!0),u(N,{key:0},L(t(k),([i,_])=>(o(),F(a,{key:i,text:i,description:`${_.length} items`,open:_.length<=("DETAILS_MAX_ITEMS"in h?h.DETAILS_MAX_ITEMS:t(we)),padding:!1},{default:T(()=>[e("div",ht,[(o(!0),u(N,null,L(_,w=>(o(),F(b,{key:w.path,asset:w,folder:i,onClick:z=>p.value=w},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(o(),u("div",_t,[(o(!0),u(N,null,L(t(c),i=>(o(),F(b,{key:i.path,asset:i,onClick:_=>p.value=i},null,8,["asset","onClick"]))),128))]))],64)):(o(),u("div",vt,[(o(!0),u(N,null,L(t(V),(i,_)=>(o(),F(d,{key:_,modelValue:t(p),"onUpdate:modelValue":f[1]||(f[1]=w=>Z(p)?p.value=w:null),item:i},null,8,["modelValue","item"]))),128))])),g(y,{"model-value":!!t(p),"auto-close":"","w-120":"",navbar:t(I),onClose:f[2]||(f[2]=i=>p.value=void 0)},{default:T(()=>[t(p)?(o(),F(v,{key:0,asset:t(p)},null,8,["asset"])):D("",!0)]),_:1},8,["model-value","navbar"])])}}});export{Ft as default};
